(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"7RL8":function(e,t,a){"use strict";a.r(t),a.d(t,"DynamicForm",(function(){return C})),a.d(t,"FilePreview",(function(){return F})),a.d(t,"WaterMask",(function(){return K}));a("+L6B");var l=a("2/Rp"),n=(a("14J3"),a("BMrR")),r=(a("jCWc"),a("kPKH")),c=(a("y8nQ"),a("Vl3Y")),i=(a("5NDa"),a("5rEg")),o=a("0Owb"),s=(a("iQDF"),a("+eQT")),m=(a("OaEy"),a("2fM7")),d=a("q1tI"),u=a.n(d),p=a("17x9"),E=a.n(p),h=a("wy2R"),g=a.n(h),f=(a("8WKK"),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,a=null;return function(){null!==a&&clearTimeout(a),a=setTimeout(()=>e.apply(this,arguments),t)}}),y=m["a"].Option,b=s["a"].RangePicker;class k extends d["PureComponent"]{constructor(){super(...arguments),this.state={open:!1},this.createFormItem=()=>{var e=this.props,t=e.items,a=e.limit,l=e.form.getFieldDecorator,n=this.state.open,r=a&&!n?t.slice(0,a):t;return r.map((e,t)=>{var a=e.type,n=e.label,r=e.options,c=e.formEleOptions,i=e.selectValueKey,o=e.selectLabelKey,s=e.formItemLayout;e.options=r||{},e.formEleOptions=c||{},e.getFieldDecorator=l,e.formItemLayout=s||{labelCol:{span:4},wrapperCol:{span:20}};var m=e.options.initialValue;switch(a){case"input":return e.placeholder="\u8bf7\u8f93\u5165".concat(n),this.createInput(e,t);case"select":return e.placeholder="\u8bf7\u9009\u62e9".concat(n),e.selectValueKey=i||"id",e.selectLabelKey=o||"name",this.createSelect(e,t);case"datepicker":if(e.placeholder="\u8bf7\u9009\u62e9".concat(n),m)try{e.options.initialValue=g.a.isMoment(m)?m:g()(m)}catch(d){throw e.options.initialValue=void 0,d}return this.createDatepicker(e,t);case"rangepicker":return m&&("[object Array]"===Object.prototype.toString.call(m)?e.options.initialValue=m.map(e=>{var t;try{t=g.a.isMoment(e)?e:g()(e)}catch(d){t=null}return t}):e.options.initialValue=null),e.placeholder=["\u5f00\u59cb\u65f6\u95f4","\u7ed3\u675f\u65f6\u95f4"],this.createRangepicker(e,t);default:break}})},this.createInput=(e,t)=>{var a=e.key,l=e.label,n=e.options,s=e.placeholder,m=e.getFieldDecorator,d=e.formEleOptions,p=e.formItemLayout;return u.a.createElement(r["a"],{span:8,key:t},u.a.createElement(c["a"].Item,Object(o["a"])({},p,{label:l}),m(a,n)(u.a.createElement(i["a"],Object(o["a"])({placeholder:s},d)))))},this.createSelect=(e,t)=>{var a=e.key,l=e.label,n=e.options,i=e.placeholder,s=e.list,d=void 0===s?[]:s,p=e.selectValueKey,E=e.selectLabelKey,h=e.getFieldDecorator,g=e.formEleOptions,f=e.formItemLayout;return u.a.createElement(r["a"],{span:8,key:t},u.a.createElement(c["a"].Item,Object(o["a"])({},f,{label:l}),h(a,n)(u.a.createElement(m["a"],Object(o["a"])({placeholder:i},g),d.map((e,t)=>u.a.createElement(y,{key:t,value:e[p]},e[E]))))))},this.createDatepicker=(e,t)=>{var a=e.key,l=e.label,n=e.options,i=e.placeholder,m=e.getFieldDecorator,d=e.formEleOptions,p=e.formItemLayout;return u.a.createElement(r["a"],{span:8,key:t},u.a.createElement(c["a"].Item,Object(o["a"])({},p,{label:l}),m(a,n)(u.a.createElement(s["a"],Object(o["a"])({placeholder:i},d)))))},this.createRangepicker=(e,t)=>{var a=e.key,l=e.label,n=e.options,i=e.placeholder,s=e.getFieldDecorator,m=e.formEleOptions,d=e.formItemLayout;return u.a.createElement(r["a"],{span:8,key:t},u.a.createElement(c["a"].Item,Object(o["a"])({},d,{label:l}),s(a,n)(u.a.createElement(b,Object(o["a"])({placeholder:i},m)))))},this.onSubmit=e=>{var t=this.props,a=t.form.validateFields,l=t.getFieldsValue;e.preventDefault(),a((e,t)=>{e||l&&l(t)})},this.handleReset=()=>{var e=this.props,t=e.form.resetFields,a=e.getFieldsValue;t(),a&&a({})},this.toggle=()=>this.setState({open:!this.state.open})}componentDidMount(){}render(){var e=this.state.open;return u.a.createElement(c["a"],{onSubmit:this.onSubmit,className:"dynamicForm"},u.a.createElement(n["a"],{className:"dynamicForm_row"},this.createFormItem()),u.a.createElement(n["a"],{className:"dynamicForm_row"},u.a.createElement(r["a"],{span:24,style:{textAlign:"right"}},u.a.createElement(l["default"],{type:"primary",htmlType:"submit"},"\u641c\u7d22"),u.a.createElement(l["default"],{type:"primary",style:{marginLeft:8},onClick:this.handleReset},"\u91cd\u7f6e"),u.a.createElement(l["default"],{type:"default",style:{marginLeft:8},onClick:this.toggle},e?"\u6536\u8d77":"\u5c55\u5f00"))))}}var v=void 0,w=c["a"].create({onValuesChange:(e,t,a)=>{v?v(t,a):v=f(e.onValuesChange)}})(k);w.propTypes={limit:E.a.number.isRequired,items:E.a.array.isRequired,getFieldsValue:E.a.func,onValuesChange:E.a.func},w.defaultProps={items:[],limit:3,onValuesChange:()=>{}};var C=w,x=(a("2qtc"),a("kLXV")),O=(a("fV52"),a("3I+P")),V=(a("Pwec"),a("CtXQ"));a("g7QV");class N extends d["Component"]{constructor(e){super(e),this.slickPrev=()=>{this.carousel1.prev()},this.slickNext=()=>{this.carousel1.next()},this.slickGoTo=e=>{this.carousel1.goTo(e)},this.isPdf=e=>e.endsWith(".pdf"),this.operateBtn=e=>{switch(this.ele=document.querySelectorAll(".slick-active.slick-current")[0],e){case"reset":this.scale=1,this.rotate=0;break;case"in":this.scale*=1.1;break;case"out":this.scale*=.9;break;case"rotate":this.rotate+=90;break;default:break}this.ele.style.transform="scale(".concat(this.scale,") rotate(").concat(this.rotate,"deg)")},this.beforeChange=(e,t)=>{this.carousel2.goTo(t)},this.afterChange=()=>{this.ele&&(this.ele.style.transform="scale(1) rotate(0deg)")},this.rotate=0,this.scale=1}componentWillUnmount(){this.ele=null}render(){var e=this.props,t=e.visible,a=e.fileList,n=e.activeIndex,r=e.slideSize,c=a.length>r,i=[...a];return u.a.createElement(x["a"],{title:"\u6587\u4ef6\u9884\u89c8",visible:t,onOk:this.props.onOk,onCancel:this.props.onCancel,footer:null,width:998,destroyOnClose:!0},u.a.createElement("div",{className:"carousel-box"},u.a.createElement("div",{className:"toolbtns"},u.a.createElement(l["default"],{type:"default",onClick:()=>this.operateBtn("reset")},"\u91cd\u7f6e"),u.a.createElement(l["default"],{onClick:()=>this.operateBtn("in"),title:"\u653e\u5927",className:"icon",type:"default"},u.a.createElement(V["a"],{type:"zoom-in"})),u.a.createElement(l["default"],{onClick:()=>this.operateBtn("out"),className:"icon",title:"\u7f29\u5c0f",type:"default"},u.a.createElement(V["a"],{type:"zoom-out"})),u.a.createElement(l["default"],{onClick:()=>this.operateBtn("rotate"),className:"icon",title:"\u65cb\u8f6c",type:"default"},u.a.createElement(V["a"],{type:"reload"}))),u.a.createElement(V["a"],{onClick:this.slickPrev,className:"carousel-arrow arrow-left",type:"left"}),u.a.createElement(V["a"],{onClick:this.slickNext,className:"carousel-arrow arrow-right",type:"right"}),u.a.createElement("div",{className:"carousel"},u.a.createElement(O["a"],{ref:e=>this.carousel1=e,arrows:!1,initialSlide:n,dots:!1,beforeChange:this.beforeChange,afterChange:this.afterChange},a.map((e,t)=>u.a.createElement("div",{key:t,className:"carousel-item-box"},u.a.createElement("div",{className:"flexbox"},this.isPdf(e.src||e.url)?u.a.createElement("a",{href:e.src||e.url,target:"_blank",rel:"noopener noreferrer"},u.a.createElement(V["a"],{type:"file-pdf",className:"pdf"})):u.a.createElement("img",{src:e.src||e.url,alt:""}))))))),u.a.createElement("div",{className:"carousel-box"},c?u.a.createElement(V["a"],{onClick:this.slickPrev,className:"carousel-arrow arrow-left",type:"left"}):null,c?u.a.createElement(V["a"],{onClick:this.slickNext,className:"carousel-arrow arrow-right",type:"right"}):null,u.a.createElement("div",{className:"carousel"},u.a.createElement(O["a"],{ref:e=>this.carousel2=e,arrows:!1,initialSlide:n,slidesToShow:r,dots:!1},i.map((e,t)=>u.a.createElement("div",{key:t,className:"carousel-item-box",onClick:()=>this.slickGoTo(t)},this.isPdf(e.src||e.url)?u.a.createElement(V["a"],{type:"file-pdf",className:"pdf"}):u.a.createElement("img",{src:e.src||e.url,alt:""})))))))}}N.defaultProps={visible:!1,fileList:[],activeIndex:0,slideSize:4,onOk:()=>{},onCancel:()=>{}};var F=N,I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/[\u0391-\uFFE5]/g,"aa").length/2};class S extends d["Component"]{constructor(e){super(e),this.renderWaterMark=()=>{var e=this.props,t=e.textStyle,a=e.body,l=e.str,n=e.fontSize,r=e.summary,c=e.rotate,i=e.width,o=e.height,s=l,m=t||"rgba(97, 97, 97,0.2)",d=document.createElement("canvas"),u=document.querySelector(a);u.style.position="relative";var p="";s="".concat(p).concat(l);var E=I(s),h=i||E*n/2,g=o||h*Math.sqrt(3);d.width=h>480?h:480,d.height=g>500?g+200:500;var f=d.getContext("2d"),y=d.width/2,b=d.height/2;f.translate(y,b),f.rotate(Math.PI/180*c),f.font="".concat(n,"px Source Han Sans CN"),f.textAlign="center",f.textBaseline="middle",f.fillStyle=m,f.fillText(s,0,0),r&&f.fillText(r,0,n),f.translate(-y,-b),this.setState({url:d.toDataURL("image/png")})},this.test=()=>{var e=document.querySelector("#c1"),t=0,a="\u6d4b\u8bd5\u6c34\u5370",l=a.length,n=20,r=l*n,c=n;e.setAttribute("width",r),e.setAttribute("height",c),e.style.backgroundColor="#f5f5f5";var i=e.getContext("2d");i.textAlign="center",i.textBaseline="middle",i.font="".concat(n,"px microsoft yahei"),i.fillStyle="rgba(97, 97, 97,0.2)";var o=r/2,s=c/2;i.translate(o,s),i.rotate(Math.PI/180*t),i.fillText(a,0,0)},this.state={url:""}}componentDidMount(){this.renderWaterMark()}render(){var e=this.state.url,t=void 0===e?"":e;return u.a.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:1e3,pointerEvents:"none",backgroundRepeat:"repeat",backgroundImage:"url(".concat(t,")")}})}}S.defaultProps={body:"body",str:"",rotate:"",width:"",height:"",fontSize:"40px",textStyle:""};var K=S},"8WKK":function(e,t,a){},GsgV:function(e,t,a){"use strict";a.r(t);var l=a("0Owb"),n=a("q1tI"),r=a.n(n),c=(a("B2uJ"),a("+su7"),a("qOys"),a("5Yjd")),i=a.n(c),o=r.a.memo((function(){var e=a("K+nK"),t=e(a("q1tI")),l=a("7RL8"),n=function(){var e=[{type:"input",key:"name",label:"\u540d\u79f0",options:{initialValue:"zhuxingmin"},formEleOptions:{allowClear:!1}},{type:"select",selectValueKey:"id",selectLabelKey:"name",key:"id",label:"\u8d44\u4ea7\u7f16\u53f7",list:[{id:1,name:"\u8d44\u4ea71"},{id:2,name:"\u8d44\u4ea72"},{id:3,name:"\u8d44\u4ea73"}],options:{initialValue:2}},{type:"datepicker",key:"date",label:"\u521b\u5efa\u65f6\u95f4",formEleOptions:{placeholder:"\u81ea\u5b9a\u4e49placeholder"},options:{initialValue:"2020-01-01"}},{type:"rangepicker",key:"range",label:"\u8d77\u6b62\u65f6\u95f4",formEleOptions:{placeholder:["start","end"]},options:{initialValue:["2020-01-01","2020-05-20"]}}];return t["default"].createElement(l.DynamicForm,{items:e})};return t["default"].createElement(n)}));t["default"]=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"markdown"},r.a.createElement("h2",{id:"dynamicform"},r.a.createElement("a",{"aria-hidden":"true",href:"#dynamicform"},r.a.createElement("span",{className:"icon icon-link"})),"DynamicForm"),r.a.createElement("h3",{id:"\u52a8\u6001\u8868\u5355"},r.a.createElement("a",{"aria-hidden":"true",href:"#\u52a8\u6001\u8868\u5355"},r.a.createElement("span",{className:"icon icon-link"})),"\u52a8\u6001\u8868\u5355")),r.a.createElement(i.a,Object(l["a"])({source:{jsx:"import React from 'react';\nimport { DynamicForm } from 'dumi-lib';\n\nexport default () => {\n  const items = [\n    {\n      type: 'input',\n      key: 'name',\n      label: '\u540d\u79f0',\n      options: {\n        initialValue: 'zhuxingmin',\n      },\n      formEleOptions: {\n        allowClear: false,\n      },\n    },\n    {\n      type: 'select',\n      selectValueKey: 'id',\n      selectLabelKey: 'name',\n      key: 'id',\n      label: '\u8d44\u4ea7\u7f16\u53f7',\n      list: [\n        {\n          id: 1,\n          name: '\u8d44\u4ea71',\n        },\n        {\n          id: 2,\n          name: '\u8d44\u4ea72',\n        },\n        {\n          id: 3,\n          name: '\u8d44\u4ea73',\n        },\n      ],\n      options: {\n        initialValue: 2,\n      },\n    },\n    {\n      type: 'datepicker',\n      key: 'date',\n      label: '\u521b\u5efa\u65f6\u95f4',\n      formEleOptions: {\n        placeholder: '\u81ea\u5b9a\u4e49placeholder',\n      },\n      options: {\n        initialValue: '2020-01-01',\n      },\n    },\n    {\n      type: 'rangepicker',\n      key: 'range',\n      label: '\u8d77\u6b62\u65f6\u95f4',\n      formEleOptions: {\n        placeholder: ['start', 'end'],\n      },\n      options: {\n        initialValue: ['2020-01-01', '2020-05-20'],\n      },\n    },\n  ];\n  return <DynamicForm items={items} />;\n};"}},{title:"\u57fa\u672c\u4f7f\u7528",desc:'<div class="markdown"><p>\u6839\u636e\u4f20\u5165\u7684<code>items</code>\u53c2\u6570\uff0c\u52a8\u6001\u751f\u6210\u8868\u5355</p></div>',dependencies:{"dumi-lib":"2.0.01"},files:{}}),r.a.createElement(o,null)),r.a.createElement("div",{className:"markdown"},r.a.createElement("h3",{id:"\u7ec4\u4ef6\u53c2\u6570"},r.a.createElement("a",{"aria-hidden":"true",href:"#\u7ec4\u4ef6\u53c2\u6570"},r.a.createElement("span",{className:"icon icon-link"})),"\u7ec4\u4ef6\u53c2\u6570"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{align:"left"},"\u53c2\u6570"),r.a.createElement("th",{align:"left"},"\u8bf4\u660e"),r.a.createElement("th",{align:"center"},"\u7c7b\u578b"),r.a.createElement("th",{align:"center"},"\u9ed8\u8ba4\u503c"),r.a.createElement("th",{align:"center"},"\u5fc5\u586b"),r.a.createElement("th",{align:"center"},"\u7248\u672c"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{align:"left"},"items"),r.a.createElement("td",{align:"left"},"\u8868\u5355\u5143\u7d20\u96c6\u5408\uff08item \u53c2\u6570\u89c1\u4e0b\u6587\uff09"),r.a.createElement("td",{align:"center"},r.a.createElement("code",null,"array")),r.a.createElement("td",{align:"center"},r.a.createElement("code",null,"[]")),r.a.createElement("td",{align:"center"},"\u662f"),r.a.createElement("td",{align:"center"},"2.0.0")),r.a.createElement("tr",null,r.a.createElement("td",{align:"left"},"limit"),r.a.createElement("td",{align:"left"},"\u9ed8\u8ba4\u5c55\u5f00\u6570\u91cf"),r.a.createElement("td",{align:"center"},r.a.createElement("code",null,"number")),r.a.createElement("td",{align:"center"},r.a.createElement("code",null,"0")),r.a.createElement("td",{align:"center"},"\u662f"),r.a.createElement("td",{align:"center"},"2.0.0")))),r.a.createElement("h3",{id:"itemsitem-\u53c2\u6570"},r.a.createElement("a",{"aria-hidden":"true",href:"#itemsitem-\u53c2\u6570"},r.a.createElement("span",{className:"icon icon-link"})),"items[item] \u53c2\u6570"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{align:"left"},"\u53c2\u6570"),r.a.createElement("th",{align:"left"},"\u8bf4\u660e"),r.a.createElement("th",{align:"center"},"\u7c7b\u578b"),r.a.createElement("th",{align:"center"},"\u9ed8\u8ba4\u503c"),r.a.createElement("th",{align:"center"},"\u5fc5\u586b"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{align:"left"},"type"),r.a.createElement("td",{align:"left"},"\u8868\u5355\u9879\u7c7b\u578b\uff0c\u6682\u65f6\u652f\u6301",r.a.createElement("code",null,"input")," ",r.a.createElement("code",null,"select")," ",r.a.createElement("code",null,"datepicker")," ",r.a.createElement("code",null,"rangepicker")),r.a.createElement("td",{align:"center"},r.a.createElement("code",null,"string")),r.a.createElement("td",{align:"center"},"-"),r.a.createElement("td",{align:"center"},"\u662f")),r.a.createElement("tr",null,r.a.createElement("td",{align:"left"},"key"),r.a.createElement("td",{align:"left"},"\u8868\u5355\u9879\u7684 key\uff0c\u540c\u65f6\u4e5f\u4f5c\u4e3a\u8be5\u8868\u5355\u9879\u5b57\u6bb5\u540d"),r.a.createElement("td",{align:"center"},r.a.createElement("code",null,"string")),r.a.createElement("td",{align:"center"},"-"),r.a.createElement("td",{align:"center"},"\u662f")),r.a.createElement("tr",null,r.a.createElement("td",{align:"left"},"label"),r.a.createElement("td",{align:"left"},"\u8868\u5355\u9879\u7684 label\uff0c\u5728\u90e8\u5206\u8868\u5355\u9879\u4e2d\uff0c\u540c\u65f6\u4e5f\u4f5c\u4e3a",r.a.createElement("code",null,"placeholder")),r.a.createElement("td",{align:"center"},r.a.createElement("code",null,"string")),r.a.createElement("td",{align:"center"},"-"),r.a.createElement("td",{align:"center"},"\u662f")),r.a.createElement("tr",null,r.a.createElement("td",{align:"left"},"formEleOptions"),r.a.createElement("td",{align:"left"},"\u8868\u5355\u5143\u7d20\u7684\u5c5e\u6027\uff0c\u540c",r.a.createElement("code",null,"antd")),r.a.createElement("td",{align:"center"},r.a.createElement("code",null,"object")),r.a.createElement("td",{align:"center"},"-"),r.a.createElement("td",{align:"center"},"\u5426")),r.a.createElement("tr",null,r.a.createElement("td",{align:"left"},"options"),r.a.createElement("td",{align:"left"},"\u8868\u5355\u57df\u65b9\u6cd5\u53c2\u6570\uff0c\u540c",r.a.createElement("code",null,"antd"),"\u8868\u5355\u7684",r.a.createElement("code",null,"getFieldDecorator"),"\u7684",r.a.createElement("code",null,"options")),r.a.createElement("td",{align:"center"},r.a.createElement("code",null,"object")),r.a.createElement("td",{align:"center"},"-"),r.a.createElement("td",{align:"center"},"\u5426")),r.a.createElement("tr",null,r.a.createElement("td",{align:"left"},"list"),r.a.createElement("td",{align:"left"},"\u5f53",r.a.createElement("code",null,"type"),"\u4e3a",r.a.createElement("code",null,"select"),"\u65f6\uff0c\u8bbe\u7f6e\u4f5c\u4e3a\u4e0b\u62c9\u6570\u636e\u6e90"),r.a.createElement("td",{align:"center"},r.a.createElement("code",null,"array")),r.a.createElement("td",{align:"center"},"-"),r.a.createElement("td",{align:"center"},"\u5426")),r.a.createElement("tr",null,r.a.createElement("td",{align:"left"},"selectValueKey"),r.a.createElement("td",{align:"left"},"\u5f53",r.a.createElement("code",null,"type"),"\u4e3a",r.a.createElement("code",null,"select"),"\u65f6\uff0c\u8bbe\u7f6e\u4f5c\u4e3a\u4e0b\u62c9\u6570\u636e",r.a.createElement("code",null,"value"),"\u7684\u5b57\u6bb5\u540d"),r.a.createElement("td",{align:"center"},r.a.createElement("code",null,"string")),r.a.createElement("td",{align:"center"},r.a.createElement("code",null,"id")),r.a.createElement("td",{align:"center"},"\u5426")),r.a.createElement("tr",null,r.a.createElement("td",{align:"left"},"selectLabelKey"),r.a.createElement("td",{align:"left"},"\u5f53",r.a.createElement("code",null,"type"),"\u4e3a",r.a.createElement("code",null,"select"),"\u65f6\uff0c\u8bbe\u7f6e\u4f5c\u4e3a\u4e0b\u62c9\u6570\u636e",r.a.createElement("code",null,"label"),"\u7684\u5b57\u6bb5\u540d"),r.a.createElement("td",{align:"center"},r.a.createElement("code",null,"string")),r.a.createElement("td",{align:"center"},r.a.createElement("code",null,"name")),r.a.createElement("td",{align:"center"},"\u5426"))))))}},"K+nK":function(e,t){function a(e){return e&&e.__esModule?e:{default:e}}e.exports=a},g7QV:function(e,t,a){}}]);